import React, { useState } from 'react';
import './SettingsModal.css';

const RULES_TEXT = `
## æ¸¸æˆè§„åˆ™ä»‹ç»

**1. åŸºæœ¬ç©æ³•**
æœ¬æ¸¸æˆåŸºäºä¸­å›½è±¡æ£‹è§„åˆ™ï¼Œèåˆäº†å¡ç‰Œæ„å»º(Roguelike)å…ƒç´ ã€‚
- **èƒœåˆ©æ¡ä»¶**ï¼šåƒæ‰å¯¹æ–¹çš„"å°†/å¸…"ã€‚
- **å›åˆåˆ¶**ï¼šåŒæ–¹è½®æµè¡ŒåŠ¨ã€‚æ¯ä¸ªå›åˆä½ å¯ä»¥**ä½¿ç”¨å¡ç‰Œ**æˆ–**ç§»åŠ¨æ£‹å­**ã€‚

**2. ç‹¬ç‰¹çš„å¡ç‰Œç³»ç»Ÿ**
- **é”¦å›Šï¼ˆæ‰‹ç‰Œï¼‰**ï¼šæ‰‹ç‰Œä¸Šé™ä¸º3å¼ ã€‚å½“æ‰‹ç‰Œå·²æ»¡æ—¶ï¼Œå›åˆå¼€å§‹å°†è·³è¿‡é€‰ç‰Œé˜¶æ®µã€‚
- **é˜¶æ®µ**ï¼š
  1. **é€‰ç‰Œé˜¶æ®µ**ï¼šå›åˆå¼€å§‹æ—¶ä»3å¼ å¡ç‰Œä¸­é€‰æ‹©1å¼ åŠ å…¥æ‰‹ç‰Œï¼ˆæ‰‹ç‰Œæ»¡æ—¶è·³è¿‡ï¼‰ã€‚
  2. **å‡ºç‰Œé˜¶æ®µ**ï¼šä½ å¯ä»¥æ‰“å‡ºä»»æ„æ•°é‡çš„å¡ç‰Œæ¥å¢å¼ºæ£‹å­ã€æ”¹å˜åœ°å½¢æˆ–å¸ƒç½®é™·é˜±ã€‚
  3. **ç§»åŠ¨é˜¶æ®µ**ï¼šæ‰“å®Œç‰Œåï¼Œä½ å¿…é¡»ç§»åŠ¨ä¸€ä¸ªæ£‹å­ï¼ˆé™¤éå¡ç‰Œæ•ˆæœè·³è¿‡äº†ç§»åŠ¨ï¼‰ã€‚

**3. å¬å”¤ç‰©è§„åˆ™**
- **å¬å”¤ä¸Šé™**ï¼šåœºä¸Šæœ€å¤šåŒæ—¶å­˜åœ¨2ä¸ªå¬å”¤ç‰©ï¼ˆè·¯éšœã€æ´å†›ç­‰ï¼‰ã€‚
- **è¶…é™æ·˜æ±°**ï¼šå½“å¬å”¤ç¬¬3ä¸ªå¬å”¤ç‰©æ—¶ï¼Œæœ€æ—©å¬å”¤çš„é‚£ä¸ªä¼šè‡ªåŠ¨æ¶ˆå¤±ï¼ˆFIFOè§„åˆ™ï¼‰ã€‚
- **ç‚®æ¶ç‰¹æ€§**ï¼šè‹¥ç‚®åƒå­æ—¶ä½¿ç”¨å¬å”¤ç‰©ä½œä¸ºç‚®æ¶ï¼Œåƒå­åç‚®æœ¬èº«ä¹Ÿä¼šä¸€åŒæ¶ˆç­ã€‚æ™®é€šæ£‹å­ä½œä¸ºç‚®æ¶ä¸å—æ­¤å½±å“ã€‚

**4. å¯¹å±€è®°å½•**
æ‰€æœ‰è¡ŒåŠ¨éƒ½ä¼šè¢«è®°å½•åœ¨å³ä¾§çš„"æˆ˜å†µ"ä¸­ï¼Œä½ å¯ä»¥éšæ—¶æŸ¥çœ‹ã€‚

**5. è®¡æ—¶**
æ¯æ–¹æœ‰10åˆ†é’Ÿæ€è€ƒæ—¶é—´ï¼Œè¶…æ—¶åˆ¤è´Ÿã€‚

**ç‰¹æ®Šè¯´æ˜**ï¼šéƒ¨åˆ†å¡ç‰Œï¼ˆå¦‚"è·µè¸"ã€"é£è¡Œ"ï¼‰ä¼šæ”¹å˜åŸºç¡€è±¡æ£‹è§„åˆ™ï¼Œè¯·ç•™æ„å¡ç‰Œæè¿°ã€‚
`;

const SettingsModal = ({ onClose, onSurrender, onQuit }) => {
    const [view, setView] = useState('MENU'); // MENU | RULES

    return (
        <div className="settings-overlay" onClick={onClose}>
            <div className="settings-modal" onClick={e => e.stopPropagation()}>
                {view === 'MENU' ? (
                    <>
                        <h3>æ¸¸æˆè®¾ç½®</h3>
                        <button className="settings-btn" onClick={() => setView('RULES')}>
                            ğŸ“œ è§„åˆ™ä»‹ç»
                        </button>
                        <button className="settings-btn surrender" onClick={onSurrender}>
                            ğŸ³ï¸ æŠ•é™
                        </button>
                        <button className="settings-btn quit" onClick={onQuit}>
                            ğŸšª é€€å‡ºæ¸¸æˆ
                        </button>
                        <button className="settings-btn close" onClick={onClose}>
                            å…³é—­
                        </button>
                    </>
                ) : (
                    <>
                        <h3>è§„åˆ™è¯´æ˜</h3>
                        <div className="rules-content">
                            {RULES_TEXT.split('\n').map((line, i) => (
                                <div key={i}>{line}</div>
                            ))}
                        </div>
                        <button className="settings-btn close" onClick={() => setView('MENU')}>
                            è¿”å›
                        </button>
                    </>
                )}
            </div>
        </div>
    );
};

export default SettingsModal;
