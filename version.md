**当前版本**: `v0.4.4`  
**更新日期**: 2026-01-21  
**维护者**: Development Team

## 📝 版本历史

### v0.4.4 (2026-01-21)
- 🐛 **Bug修复**:
    - **高亮修复**: 修复走棋高亮从小圆点变成大圈的问题 (CSS样式冲突)。
    - **通知系统**: 修复对手出牌通知不显示的问题 (`action.card` → `action.payload.card`)。
    - **通知逻辑**: 修复通知系统的状态时序问题和闭包陷阱。
    - **类型一致性**: 统一陷阱类型判断使用常量。
- 🔧 **代码优化**:
    - 通知ID改用递增计数器避免碰撞。
    - 添加缺失的依赖数组项 (`myColor`)。
    - 在 dispatch 前捕获状态用于通知计算。

### v0.4.3 (2026-01-21)
- ✨ **新功能**:
    - **行动通知**: 新增对手操作（出牌、盖牌）的醒目通知提示。
    - **视觉反馈**: 通知支持卡牌名称显示与目标位置高亮。
- 🔧 **游戏机制**:
    - **陷阱限制**: 限制每位玩家最多同时布置 2 张陷阱卡，超过则无法盖放。
    - **引擎优化**: 统一陷阱卡管理逻辑。

### v0.4.2 (2026-01-21)
- 🐛 **严重Bug修复**:
    - 修复 **战绩统计失效** 问题：现在游客和注册用户的胜负场次、对局记录均能正常更新。
    - 修复 **投降功能**：投降现在会正确触发游戏结束结算流程，而不是直接退出。
- 🎨 **界面与体验**:
    - **菜单美化**: 对战设置菜单采用暗色磨砂玻璃风格，按钮区分色系。
    - **规则完善**: 更新了内置规则说明，包含详细的卡牌/召唤物机制。
    - **大厅入口**: 个人菜单中新增“游戏规则”查看入口。

### v0.4.1 (2026-01-21)
- ⚖️ **卡牌平衡调整**: 分离“通常”与“行动”类型。
    - **通常 (Normal)**: 使用后**不消耗**回合（原大部分行动卡调整为此类，如“宇宙”、“定身术”）。
    - **行动 (Action)**: 使用后**强制结束**回合（仅保留“火球术”、“纳米激素”）。
- ✨ **卡牌图标**: 新增“通常”类型图标 (✦)。
- 🎨 **界面优化**: 重制游戏结算界面 (Game Over)，采用居中弹窗与高级材质设计。
- 🔧 **数据库模型**: 更新 `Card` 模型以支持新类型。

### v0.4.0 (2026-01-21)
- 📊 **日志系统上线**: 完整记录对局详情（初始状态、操作流、结果）。
    - 数据库 `GameRecord` 关联详细 JSON 日志文件。
    - 服务端自动生成并存储对局日志。
- 🗄️ **数据库同步**: 实现 `syncCards` 脚本，自动同步前端卡牌定义到数据库。
- 🐛 **Bug修复**: 修复对局记录保存失败的问题 (Enum值校验、部署进程名)。

### v0.3.0 (2026-01-20)
- 🔧 用户系统重构：正式用户表 (User) 与游客表 (Guest) 分离
- 🔧 新增对局记录表 (GameRecord) 用于保存历史战绩
- ✨ 新增用户 API：个人资料查看/修改、改名、历史记录查询、统计数据
- ✨ 新增预设头像系统 (棋子图标)，预留自定义头像接口
- ✨ 新增游客转正功能
- 🔒 增强登录安全：失败锁定、账户状态检查

### v0.2.7 (2026-01-20)
- 🐛 修复顶号机制 (使用延迟断开避免竞态条件)
- 🐛 增加房间列表和匹配系统的调试日志

### v0.2.5 (2026-01-20)
- 🔒 新增安全机制：单点登录 (顶号) 机制
- ⌛ 新增游戏规则：断线超时判负机制 (对手掉线且超时直接获胜)

### v0.2.4 (2026-01-20)
- 🔴 修复匹配系统后端逻辑 (变量提升与重复代码问题)
- 🔴 修复大厅 (Lobby) 界面渲染错误

### v0.2.3 (2026-01-20)
- ✨ 新增功能：快速匹配系统 (先到先得队列)
- 🔵 界面优化：大厅新增匹配入口面板

### v0.2.2 (2026-01-20)
- 🟡 修复将军检测逻辑 (增加 ignoreTurn 支持)
- 🔵 界面美化：添加象棋木纹材质，优化状态栏布局 (合并永续卡显示)

### v0.2.1 (2026-01-20)
- 🔴 修复严重 Crash Bug (renderCells is not defined)

### v0.2.0 (2026-01-20)
- 🔴 修复 1 个严重 Bug (BUG-008 部分优化)
- 🟡 修复 3 个次要问题 (ISSUE-011, ISSUE-012, ISSUE-014)
- 代码结构优化：`GameArena` 样式分离

### v0.1.1 (2026-01-20)
- 🔴 修复 5 个严重 Bug (BUG-001 至 BUG-005)
- 🟠 修复 4 个中等问题 (BUG-006, BUG-007, BUG-009, BUG-010)
- 🟡 优化 1 个次要问题 (ISSUE-013 常量抽取)
- 🔵 实现 4 个体验优化 (UX-001 至 UX-004)
- 🛠️ 完善 1 个最佳实践 (TECH-004)

### v0.1.0 (2026-01-20)
- 初始版本
- 完成核心游戏功能
- 完成用户系统
- 完成房间匹配系统
- 记录 24 个已知问题待修复

---

## 🔗 相关文档

- [交接文档 (HANDOVER.md)](./HANDOVER.md)
- [部署说明 (DEPLOYMENT.md)](./DEPLOYMENT.md)
- [自动部署 (AUTO_DEPLOY.md)](./AUTO_DEPLOY.md)
